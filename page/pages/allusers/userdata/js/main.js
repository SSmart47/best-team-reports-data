const firebaseConfig={apiKey:"AIzaSyAqCTjwhTzgLUV_HrGLhdxjxx5nFR4g0Sg",authDomain:"betsteamreportsdata.firebaseapp.com",databaseURL:"https://betsteamreportsdata-default-rtdb.firebaseio.com",projectId:"betsteamreportsdata",storageBucket:"betsteamreportsdata.appspot.com",messagingSenderId:"507208715373",appId:"1:507208715373:web:2f6188e8252c868f8a0364"};firebase.initializeApp(firebaseConfig);var res_username=localStorage.getItem("ss47_bestteamreportsdata_user_i"),res__u_n_=localStorage.getItem("ss47_bestteamreportsdata_user_n"),_u_n_=localStorage.getItem("ss47_bestteamreportsdata_ouser_d");function Anim(e,t){return'<animate attributeName="stroke-dashoffset" from="'+t+'" to="0" dur="'+e+'s" fill="freeze" />'}function Len(e,t,r,a){return Math.sqrt((e-r)*(e-r)+(t-a)*(t-a))}function Circle(e,t,r,a,n,s,o){return'<circle cx="'+e+'" cy="'+t+'" r="'+r+'" stroke="'+a+'" fill="'+n+'" stroke-width="'+s+'" stroke-dasharray="'+o+'"></circle>'}function Line(e,t,r,a,n,s,o){return'<line x1="'+e+'" y1="'+t+'" x2="'+r+'" y2="'+a+'" stroke="'+n+'" stroke-width="'+s+'" stroke-dasharray="'+o+'"></line>'}function AnimLine(e,t,r,a,n,s,o){var i=Len(e,t,r,a);return'<line x1="'+e+'" y1="'+t+'" x2="'+r+'" y2="'+a+'" stroke="'+n+'" stroke-width="'+s+'" stroke-dasharray="'+i+'" stroke-dashoffset="'+i+'">'+Anim(o,i)+"</line>"}var generate_content=document.getElementById("id_my");function Fixed(e,t){for(var r=0,a=0;a<e.length;a++)e[a]>r&&(r=e[a]);for(var n=t/r,a=0;a<e.length;a++)e[a]*=n;return e}function Interval(e,t){return parseFloat(e)/parseFloat(t)}function Inverted(e,t){return parseFloat(t-e)}function SetElement(e,t){document.getElementById(e).innerHTML+=t}function Draw(e,t){var r=[],a=[],n=document.getElementById(e),e=parseFloat(n.clientWidth),s=parseFloat(n.clientHeight),o=t.length;if(0!=o)if(1!=o){var i=Interval(e,o-1);t=Fixed(t,s);var l=0;l+=i,r.push(0),a.push(s-t[0]),n.innerHTML+=Circle(0,s-t[0],"4","aqua","aqua","0","");for(var u=1;u<o;u++)n.innerHTML+=Circle(l,s-t[u],"4","aqua","aqua","0",""),r.push(l),a.push(s-t[u]),l+=i;var c=0,d="";d+='<polyline points="';for(u=0;u<r.length;u++)d+=r[u]+","+a[u]+" ";for(u=1;u<r.length;u++)c+=Len(r[u-1],a[u-1],r[u],a[u]);d+='"',d+='style="fill:none;stroke:aqua;stroke-width:2;" stroke-dasharray="',d+=c+'"',d+='stroke-dashoffset="',d+=c+'">',d+=Anim("1",c),d+="</polyline>",n.innerHTML+=d}else n.innerHTML+=Circle(e/2,s/2,"4","aqua","aqua","0","")}function GenerateDrawContents(e){var t=JsonToList(e.objects),r="";r+="<center>";for(var a=0;a<t.length;a++)r+='<br><p class="css-title">'+t[a][0]+"</p>",r+='<div class="css-div" id="id_dv_'+(a+1)+'">',r+='<svg class="css-svg" id="id_draw_content_'+(a+1)+'">',r+="</svg>",r+="</div>";r+="</center>",r+="<br><br><br><br>",generate_content.innerHTML=r}function JsonToList(e){var t,r=e,a=[];for(t in r)a.push([t,r[t]]);return a}function DMY(e){var t="",r="",a="",n=0;e+="-";for(var s=0;s<e.length;s++)"-"==e[s]?n++:0==n?a+=e[s]:1==n?r+=e[s]:t+=e[s];return[t,r,a]}function Part(e,t){for(var r="",a="",n=0,s=0;s<e.length;s++)"-"==e[s]?n++:0==n?r+=e[s]:a+=e[s];return 1==t?r:a}function ToHour(e){var t=parseInt(e),r=parseInt(t/60),a="",e="";return e+=t%=60,(a+=r).length<2&&(a="0"+a),e.length<2&&(e="0"+e),a+":"+e}function SubStr(e,t,r){var a="";t<0&&(t=0),r>e.length&&(r=e.length);for(var n=t;n<r;n++)a+=e[n];return a}firebase.database().ref().get().then(e=>{if(e.exists()){for(var e=e.val(),t=JsonToList(e.users),r=JsonToList(e.objects),a=[],n=0;n<t.length;n++)if(t[n][0]==_u_n_){document.getElementById("id_cur_user").innerHTML=t[n][1].nick,a=JsonToList(t[n][1].reports);break}GenerateDrawContents(e);for(var s=0;s<r.length;s++){var o=r[s][1].name,i=r[s][1].type,l=[],u=1,c="";if(c+=u+=s,"time"==i||"num"==i)for(var d=0;d<a.length;d++)null!=a[d][1][o]&&l.push(parseFloat(a[d][1][o].value));else if("speed"==i)for(var f,_,d=0;d<a.length;d++)null!=a[d][1][o]&&(f=Part(_=a[d][1][o].value,1),_=Part(_,2),f=parseFloat(f),_=0<(_=parseFloat(_))?f/_:0,l.push(_));setTimeout(Draw,1,"id_draw_content_"+c,l)}}else console.log("No such user!")}).catch(e=>{alert("No connection to server!"),console.error(e)}),document.getElementById("id_btn_back").onclick=function(){localStorage.setItem("ss47_bestteamreportsdata_user_i",res_username),localStorage.setItem("ss47_bestteamreportsdata_user_n",res__u_n_),localStorage.setItem("ss47_bestteamreportsdata_ouser_d",""),window.location="../allusers.html"};
