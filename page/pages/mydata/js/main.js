const firebaseConfig={apiKey:"AIzaSyAqCTjwhTzgLUV_HrGLhdxjxx5nFR4g0Sg",authDomain:"betsteamreportsdata.firebaseapp.com",databaseURL:"https://betsteamreportsdata-default-rtdb.firebaseio.com",projectId:"betsteamreportsdata",storageBucket:"betsteamreportsdata.appspot.com",messagingSenderId:"507208715373",appId:"1:507208715373:web:2f6188e8252c868f8a0364"};firebase.initializeApp(firebaseConfig);var username=localStorage.getItem("ss47_bestteamreportsdata_user_i"),_u_n_=localStorage.getItem("ss47_bestteamreportsdata_user_n");function Anim(e,t){return'<animate attributeName="stroke-dashoffset" from="'+t+'" to="0" dur="'+e+'s" fill="freeze" />'}function Len(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}function Circle(e,t,r,n,a,s,o){return'<circle cx="'+e+'" cy="'+t+'" r="'+r+'" stroke="'+n+'" fill="'+a+'" stroke-width="'+s+'" stroke-dasharray="'+o+'"></circle>'}function Line(e,t,r,n,a,s,o){return'<line x1="'+e+'" y1="'+t+'" x2="'+r+'" y2="'+n+'" stroke="'+a+'" stroke-width="'+s+'" stroke-dasharray="'+o+'"></line>'}function AnimLine(e,t,r,n,a,s,o){var i=Len(e,t,r,n);return'<line x1="'+e+'" y1="'+t+'" x2="'+r+'" y2="'+n+'" stroke="'+a+'" stroke-width="'+s+'" stroke-dasharray="'+i+'" stroke-dashoffset="'+i+'">'+Anim(o,i)+"</line>"}var generate_content=document.getElementById("id_my");function Fixed(e,t){for(var r=0,n=0;n<e.length;n++)e[n]>r&&(r=e[n]);for(var a=t/r,n=0;n<e.length;n++)e[n]*=a;return e}function Interval(e,t){return parseFloat(e)/parseFloat(t)}function Inverted(e,t){return parseFloat(t-e)}function SetElement(e,t){document.getElementById(e).innerHTML+=t}function Draw(e,t){var r=[],n=[],a=document.getElementById(e),e=parseFloat(a.clientWidth),s=parseFloat(a.clientHeight),o=t.length;if(0!=o)if(1!=o){var i=Interval(e,o-1);t=Fixed(t,s);var l=0;l+=i,r.push(0),n.push(s-t[0]),a.innerHTML+=Circle(0,s-t[0],"4","aqua","aqua","0","");for(var u=1;u<o;u++)a.innerHTML+=Circle(l,s-t[u],"4","aqua","aqua","0",""),r.push(l),n.push(s-t[u]),l+=i;var c=0,f="";f+='<polyline points="';for(u=0;u<r.length;u++)f+=r[u]+","+n[u]+" ";for(u=1;u<r.length;u++)c+=Len(r[u-1],n[u-1],r[u],n[u]);f+='"',f+='style="fill:none;stroke:aqua;stroke-width:2;" stroke-dasharray="',f+=c+'"',f+='stroke-dashoffset="',f+=c+'">',f+=Anim("1",c),f+="</polyline>",a.innerHTML+=f}else a.innerHTML+=Circle(e/2,s/2,"4","aqua","aqua","0","")}function GenerateDrawContents(e){var t=JsonToList(e.objects),r="";r+="<center>";for(var n=0;n<t.length;n++)r+='<br><p class="css-title">'+t[n][0]+"</p>",r+='<div class="css-div" id="id_dv_'+(n+1)+'">',r+='<svg class="css-svg" id="id_draw_content_'+(n+1)+'">',r+="</svg>",r+="</div>";r+="</center>",r+="<br><br><br><br>",generate_content.innerHTML=r}function JsonToList(e){var t,r=e,n=[];for(t in r)n.push([t,r[t]]);return n}function DMY(e){var t="",r="",n="",a=0;e+="-";for(var s=0;s<e.length;s++)"-"==e[s]?a++:0==a?n+=e[s]:1==a?r+=e[s]:t+=e[s];return[t,r,n]}function Part(e,t){for(var r="",n="",a=0,s=0;s<e.length;s++)"-"==e[s]?a++:0==a?r+=e[s]:n+=e[s];return 1==t?r:n}function ToHour(e){var t=parseInt(e),r=parseInt(t/60),n="",e="";return e+=t%=60,(n+=r).length<2&&(n="0"+n),e.length<2&&(e="0"+e),n+":"+e}function SubStr(e,t,r){var n="";t<0&&(t=0),r>e.length&&(r=e.length);for(var a=t;a<r;a++)n+=e[a];return n}firebase.database().ref().get().then(e=>{if(e.exists()){for(var e=e.val(),t=JsonToList(e.users),r=JsonToList(e.objects),n=[],a=0;a<t.length;a++)if(t[a][1].nick==_u_n_){n=JsonToList(t[a][1].reports);break}GenerateDrawContents(e);for(var s=0;s<r.length;s++){var o=r[s][1].name,i=r[s][1].type,l=[],u=1,c="";if(c+=u+=s,"time"==i||"num"==i)for(var f=0;f<n.length;f++)null!=n[f][1][o]&&l.push(parseFloat(n[f][1][o].value));else if("speed"==i)for(var d,h,f=0;f<n.length;f++)null!=n[f][1][o]&&(d=Part(h=n[f][1][o].value,1),h=Part(h,2),d=parseFloat(d),h=0<(h=parseFloat(h))?d/h:0,l.push(h));setTimeout(Draw,1,"id_draw_content_"+c,l)}}else console.log("No such user!")}).catch(e=>{alert("No connection to server!"),console.error(e)}),document.getElementById("id_btn_back").onclick=function(){localStorage.setItem("ss47_bestteamreportsdata_user_i",username),localStorage.setItem("ss47_bestteamreportsdata_user_n",_u_n_),window.location="../../main.html"};
